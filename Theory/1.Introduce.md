-- Why Do We Need Web API? --
- Vấn đề nếu tất cả ứng dụng tương tác trực tiếp với cơ sở dữ liệu:
  1. Logic trùng lặp cho mỗi ứng dụng: Nghiệp vụ cần có logic nghiệp vụ riêng. Chúng ta sẽ viết cùng một logic cho mỗi loại ứng dụng, dẫn đến việc lặp lại logic giống nhau.
  2. Code dễ phát sinh lỗi: Logic nghiệp vụ được viết cho từng loại ứng dụng. Trong ví dụ này, chúng ta phải viết code ở ba ứng dụng khác nhau, dễ bỏ sót code hoặc logic ở một số ứng dụng.
  3. Một số framework front-end không thể giao tiếp trực tiếp với Database: Ví dụ nếu phát triển website bằng Angular - một framework front-end, thì nó không thể giao tiếp trực tiếp với cơ sở dữ liệu.
  4. Khó bảo trì: Cấu trúc này rất khó bảo trì. Code được viết ở nhiều nơi, khi cần cải tiến ứng dụng phải thực hiện thay đổi ở nhiều chỗ.

-- Need for Web APIs: --
- Mục tiêu của chúng ta là thiết lập giao tiếp giữa cả ba ứng dụng này với cơ sở dữ liệu để quản lý dữ liệu. 
- Vậy chúng ta sẽ làm gì? Chúng ta sẽ thêm một Dự án Web API mới vào giữa ba ứng dụng front-end và cơ sở dữ liệu back-end.
  - Dự án Web API này sẽ tương tác với cơ sở dữ liệu, còn cả ba ứng dụng kia chỉ cần giao tiếp với Dự án Web API, như minh họa trong hình dưới đây.
- Lợi ích của Web API
  - Như vậy, các ứng dụng Website, Android và iOS không cần truy cập trực tiếp vào cơ sở dữ liệu. 
  - Chúng chỉ cần giao tiếp với Dự án Web API, và nhiệm vụ của Dự án Web API là tương tác với cơ sở dữ liệu. 
  - Toàn bộ business logic (logic nghiệp vụ) sẽ chỉ được viết trong Dự án Web API. Do đó, chúng ta cần Web API cho dự án của mình.

Tóm lại, Web API đóng vai trò trung gian giữa Front-End và Back-End.

-- What is Web API? --
- Web API (Giao diện Lập trình Ứng dụng Web) là một tập hợp các quy tắc và giao thức cho phép các ứng dụng phần mềm khác nhau giao tiếp với nhau qua Internet trong một môi trường phân tán. 
- Nó định nghĩa các phương thức và định dạng dữ liệu mà ứng dụng có thể sử dụng để yêu cầu hoặc trao đổi thông tin. 
- Web API thường dựa trên giao thức HTTP (Hypertext Transfer Protocol) và có thể trả về dữ liệu dưới nhiều định dạng như JSON, XML hoặc các định dạng khác.
- Web API thường cung cấp một tập hợp các endpoint (điểm cuối), là các URI mà các client như web, mobile hoặc desktop có thể gọi để thực hiện các thao tác cụ thể, chẳng hạn như truy vấn hoặc gửi dữ liệu.

-- What is ASP.NET Core Web API? --
- ASP.NET Core Web API là một framework do Microsoft cung cấp để xây dựng các API dựa trên HTTP (các dịch vụ web RESTful) bằng cách sử dụng ASP.NET Core. 
- Theo Microsoft, ASP.NET Core Web API là giải pháp lý tưởng để phát triển các dịch vụ RESTful trên nền tảng .NET. Các dịch vụ Web API này sau đó có thể được sử dụng bởi nhiều loại client khác nhau, bao gồm:
  - Trình duyệt web
  - Ứng dụng di động
  - Ứng dụng desktop
  - Thiết bị IoT, v.v.

-- Why We Need ASP.NET Core Web API? --
- ASP.NET Core Web API là một framework xuất sắc để xây dựng các dịch vụ HTTP có thể được sử dụng bởi nhiều loại client, bao gồm trình duyệt, điện thoại di động, iPhone và máy tính bảng. ASP.NET Core Web API mang lại nhiều lợi ích:
  1. Hiệu suất cao: ASP.NET Core nổi tiếng với khả năng xử lý nhanh và mở rộng, phù hợp để xây dựng các API có lưu lượng truy cập lớn. Nó nhanh hơn phiên bản tiền nhiệm ASP.NET.
  2. Đa nền tảng: ASP.NET Core chạy được trên Windows, Linux và macOS, cho phép triển khai API trên nhiều hệ điều hành khác nhau.
  3. Tính module hóa: Framework được thiết kế theo hướng module, giúp lập trình viên chỉ cần tích hợp những thành phần cần thiết, giữ cho ứng dụng nhẹ và phản hồi nhanh.
  4. Hỗ trợ tính năng hiện đại: Bao gồm Dependency Injection, Middleware và lập trình bất đồng bộ (asynchronous programming).
  5. Bảo mật: Tích hợp sẵn các tính năng bảo mật API như xác thực (authentication) và phân quyền (authorization).

-- What is Rest? --
- REST (viết tắt của Representational State Transfer) là một Mẫu Thiết Kế Kiến Trúc (Architectural Design Pattern) dùng để Trao Đổi Dữ Liệu trong Môi Trường Phân Tán. 
-  Trong REST, tồn tại hai thành phần là Client (Máy khách) và Server (Máy chủ), dữ liệu sẽ được trao đổi giữa client và server thông qua môi trường phân tán.

-- What are the REST Principles? --
1. Client-Server Architecture:
- Một hệ thống RESTful phải có sự phân tách rõ ràng giữa client (chịu trách nhiệm giao diện người dùng) và server (chịu trách nhiệm lưu trữ dữ liệu, xử lý và logic ứng dụng). Client và server giao tiếp thông qua một giao diện chuẩn hóa (thường là HTTP).
- Tại sao quan trọng?
  - Cho phép phát triển và triển khai độc lập cả client và server.
  - Thay đổi giao diện client không yêu cầu thay đổi kiến trúc server và ngược lại.

2. Stateless (Không trạng thái): 
- Ràng buộc Stateless quy định rằng giao tiếp giữa client và server phải không lưu trữ trạng thái giữa các yêu cầu. 
- Điều này có nghĩa là server không lưu trữ bất kỳ thông tin nào liên quan đến phiên làm việc của client. 
- Mỗi yêu cầu từ client đến server phải chứa tất cả thông tin cần thiết để server có thể xác định client và xử lý yêu cầu đó. 
- Tại sao quan trọng?
  - Bất kỳ server nào cũng có thể xử lý bất kỳ yêu cầu nào vì không có ngữ cảnh riêng của client được lưu trữ trên server.
  - Mỗi yêu cầu từ client có thể được server xử lý độc lập.

2. Cacheable (Có thể lưu cache)
- Trong các ứng dụng thực tế, một số dữ liệu từ server không thay đổi thường xuyên (ví dụ: danh sách quốc gia, tỉnh/thành phố, sản phẩm...). RESTful API có thể tận dụng cơ chế caching của HTTP. 
- Các phản hồi từ server nên chỉ định liệu một tài nguyên có thể được lưu cache bởi client hay không và trong bao lâu. Caching cải thiện hiệu suất và giảm tải server bằng cách cho phép client (và các trung gian) tái sử dụng phản hồi.
- Tại sao quan trọng?
  - Các tài nguyên được yêu cầu thường xuyên có thể được phục vụ từ cache thay vì phải tải lại từ server.
  - Giảm số lượt truy vấn đến server.

3. Uniform Interface (Giao diện đồng nhất)
- Giao diện đồng nhất thường được coi là ràng buộc quan trọng nhất của REST. Nó đảm bảo tất cả client có thể giao tiếp theo một cách chuẩn hóa, thường được chia thành 4 ràng buộc con:
  1. Định danh tài nguyên (Resource Identification):
    - Mỗi tài nguyên (ví dụ: người dùng, đơn hàng, sản phẩm) được định danh duy nhất bằng một URI (Uniform Resource Identifier). Ví dụ: trong một nền tảng blog, mỗi bài viết có thể được truy cập tại https://example.com/posts/{postId}.
  2. Phương thức HTTP (HTTP Methods):
    - Các tài nguyên được thao tác bằng cách gửi biểu diễn (JSON, XML) đến server, thường sử dụng các phương thức HTTP chuẩn (GET, POST, PUT, DELETE).
  3. Thông điệp tự mô tả (Self-Descriptive Messages):
    - Mỗi thông điệp chứa đủ thông tin để mô tả cách xử lý yêu cầu, bao gồm phương thức HTTP, header và kiểu dữ liệu để truyền đạt ý định và định dạng của yêu cầu/phản hồi.
  4. Hypermedia as the Engine of Application State (HATEOAS):
    - HATEOAS khuyến khích tương tác động với API bằng cách thông báo cho client về các hành động khả dụng từ tài nguyên hiện tại. Các siêu liên kết (hyperlinks) được nhúng trong phản hồi hướng dẫn client về các thao tác có thể thực hiện tiếp theo.
- Tại sao quan trọng?
  - Client tương tác với tài nguyên theo cùng một cách.
  - Thay đổi logic bên trong server không nhất thiết phá vỡ client, vì chúng tuân thủ một giao thức đồng nhất.

4. Content Negotiation (Thương lượng nội dung)
- Client và server có thể thương lượng kiểu dữ liệu được sử dụng để biểu diễn tài nguyên. Client thường chỉ định định dạng ưa thích thông qua header Accept, và server phản hồi bằng một trong các định dạng được hỗ trợ.
- Tại sao quan trọng?
  - Cho phép các client khác nhau (ứng dụng di động, trình duyệt...) yêu cầu định dạng phù hợp nhất (JSON, XML, HTML...).
  - Server có thể hỗ trợ nhiều định dạng mà không cần thay đổi định danh tài nguyên.

5. Layered System (Hệ thống phân tầng)
- Một dịch vụ RESTful có thể được cấu thành từ nhiều tầng như bảo mật, caching, cân bằng tải và lưu trữ dữ liệu. Mỗi tầng chỉ biết về tầng liền kề trên/dưới nó.
- Tại sao quan trọng?
  - Dịch vụ có thể mở rộng bằng cách thêm các tầng mới (ví dụ: caching, xác thực) mà không phá vỡ client hiện có.
  - Các tầng trung gian có thể xử lý các tác vụ như cân bằng tải, SSL termination, ghi log hoặc lọc yêu cầu độc hại.

-- Difference Between ASP.NET Web API and ASP.NET Core Web API --
- ASP.NET Web API và ASP.NET Core Web API đại diện cho hai cách tiếp cận khác nhau để xây dựng Web API (Dịch vụ RESTful) trong framework ASP.NET, với những điểm khác biệt chính sau:
1. Hỗ trợ nền tảng
  - ASP.NET Web API: Được xây dựng trên .NET Framework, nghĩa là chỉ chạy trên hệ điều hành Windows.
  - ASP.NET Core Web API: Là một phần của framework ASP.NET Core, chạy trên .NET Core, cho phép đa nền tảng (Windows, Linux và macOS).
2. Hiệu suất
  - ASP.NET Web API: Dù hiệu quả nhưng không bằng ASP.NET Core do kiến trúc cũ và phụ thuộc vào .NET Framework.
  - ASP.NET Core Web API: Được thiết kế nhẹ và hiệu suất cao, tối ưu từ gốc, hỗ trợ lập trình bất đồng bộ tốt hơn, xử lý được nhiều request hơn và tiêu thụ ít tài nguyên hơn.
3. Tính năng thiết kế API
  - ASP.NET Web API: Hỗ trợ RESTful nhưng không có sẵn các tính năng như versioning (phiên bản hóa API) hay response compression (nén phản hồi) mà phải dùng thêm thư viện bên thứ ba.
  - ASP.NET Core Web API: Hỗ trợ sẵn các tính năng nâng cao như versioning, response caching (bộ nhớ đệm phản hồi) và response compression, giúp xây dựng API mạnh mẽ hơn.
4. Cấu hình và Hosting
  - ASP.NET Web API: Thường được host trên IIS (Internet Information Services), cấu hình chủ yếu qua file web.config.
  - ASP.NET Core Web API: Linh hoạt hơn, có thể host trên IIS, Kestrel (máy chủ web đa nền tảng của ASP.NET Core) hoặc Docker. Cấu hình đa dạng qua file JSON, biến môi trường, tham số dòng lệnh… thay vì phụ thuộc vào web.config.
5. Dependency Injection (DI)
  - ASP.NET Web API: Hỗ trợ DI nhưng không tích hợp sẵn, cần dùng thư viện bên thứ ba như Unity hoặc Ninject.
  - ASP.NET Core Web API: Hỗ trợ DI tích hợp sẵn trong framework, giúp code ít phụ thuộc và dễ bảo trì hơn.
6. Hỗ trợ Middleware
  - ASP.NET Web API: Không hỗ trợ middleware như ASP.NET Core, việc triển khai các handler và module tùy chỉnh phức tạp hơn.
  - ASP.NET Core Web API: Sử dụng pipeline middleware dễ tùy chỉnh, cho phép chèn code trước/sau khi xử lý request, hỗ trợ xác thực, xử lý lỗi và logging một cách đơn giản hơn.

-- Lựa chọn giữa ASP.NET Web API và ASP.NET Core Web API
- Yêu cầu nền tảng: Nếu cần đa nền tảng (Linux/macOS), chọn ASP.NET Core Web API.
- Hiệu suất: Nếu cần hiệu suất cao và khả năng mở rộng, ASP.NET Core Web API là lựa chọn tối ưu nhờ kiến trúc nhẹ và tối ưu hóa.