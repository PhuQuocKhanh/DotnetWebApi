-- 202 HTTP Status Code --
- Mã trạng thái HTTP 202 (202 HTTP Status Code) được gọi là "Accepted" (Đã chấp nhận). 
- Đây là một mã phản hồi thành công, cho biết yêu cầu đã được chấp nhận để xử lý nhưng quá trình xử lý chưa hoàn tất. 
- Mã này giúp thông báo cho phía client rằng yêu cầu đã được tiếp nhận, nhưng kết quả cuối cùng chưa có sẵn ngay lập tức. 
- Mã trạng thái này thường được sử dụng trong các trường hợp máy chủ cần thời gian dài để xử lý yêu cầu và yêu cầu sẽ được tiếp tục xử lý bất đồng bộ. Dưới đây là một số điểm quan trọng về mã trạng thái 202:
  - Request Accepted: Máy chủ đã nhận yêu cầu và sẽ xử lý, nhưng quá trình xử lý có thể không hoàn thành ngay lập tức.
  - Not a Guarantee of Success: Mã 202 không có nghĩa là yêu cầu cuối cùng sẽ thành công, mà chỉ xác nhận yêu cầu ban đầu hợp lệ và đã được chấp nhận để xử lý. Kết quả cuối cùng cần được kiểm tra sau khi quá trình xử lý hoàn tất.
  - Asynchronous Operations: Thường được sử dụng cho các thao tác bất đồng bộ, nơi máy chủ sẽ xử lý yêu cầu ở chế độ nền và client không cần phải đợi hoàn tất.
  - Response Payload: Phản hồi với mã 202 thường bao gồm thông tin về cách theo dõi tiến trình xử lý. 
  Ví dụ, có thể là một URL trỏ đến một endpoint trạng thái, nơi client có thể kiểm tra tiến độ xử lý hoặc thông tin về thời gian client nên đợi trước khi kiểm tra lại.

-- Using Accepted in ASP.NET Core Web API: --
- Phương thức Accepted trả về mã trạng thái 202 Accepted, cho biết yêu cầu đã được chấp nhận để xử lý nhưng chưa hoàn thành. Có 6 phiên bản nạp chồng của phương thức Accepted trong ASP.NET Core Web API (có thể kiểm tra trong lớp ControllerBase):
  1. AcceptedResult Accepted(): Trả về mã 202 Accepted mà không có nội dung hoặc header bổ sung. Hữu ích khi chỉ cần thông báo yêu cầu đã được chấp nhận mà không cần cung cấp thêm chi tiết.
  2. AcceptedResult Accepted(object? value): Trả về mã 202 Accepted với đối tượng được cung cấp dưới dạng JSON trong phần thân phản hồi. Sử dụng khi cần trả về dữ liệu bổ sung về việc chấp nhận yêu cầu.
  3. AcceptedResult Accepted(Uri uri): Trả về mã 202 Accepted và đặt header Location của phản hồi thành Uri được cung cấp. Phù hợp khi cần cung cấp URL để kiểm tra trạng thái yêu cầu.
  4. AcceptedResult Accepted(string? uri): Tương tự phiên bản Uri nhưng nhận chuỗi đại diện cho URI. Hữu ích khi URI được xây dựng động dưới dạng chuỗi.
  5. AcceptedResult Accepted(string? uri, object? value): Trả về mã 202 Accepted, đặt header Location và bao gồm đối tượng được tuần tự hóa trong phần thân phản hồi. Hữu ích khi cần cung cấp cả vị trí kiểm tra trạng thái và dữ liệu liên quan.
  6. AcceptedResult Accepted(Uri uri, object? value): Tương tự phiên bản trên nhưng sử dụng đối tượng Uri thay vì chuỗi.

-- Using AcceptedAtAction in ASP.NET Core Web API: --
- Trong ASP.NET Core Web API, phương thức AcceptedAtAction là cách để trả về mã trạng thái HTTP 202 Accepted cùng với thông tin bổ sung về cách và nơi client có thể theo dõi một yêu cầu đang được xử lý bất đồng bộ. Phương thức này hữu ích để cung cấp phản hồi bao gồm URI đến action cụ thể nơi kết quả xử lý có thể được truy cập hoặc kiểm tra. 
- Các phiên bản overload sau có sẵn trong ASP.NET Core:
1. AcceptedAtActionResult AcceptedAtAction(string? actionName):
  - Trả về phản hồi 202 Accepted và đặt header Location thành URL của action được chỉ định trong cùng controller
  - Hữu ích khi không cần chỉ định tên controller hoặc dữ liệu bổ sung
2. AcceptedAtActionResult AcceptedAtAction(string? actionName, string? controllerName):
  - Tương tự như trên nhưng cho phép chỉ định controller khác với controller hiện tại
  - Hữu ích khi action nằm trong controller khác
3. AcceptedAtActionResult AcceptedAtAction(string? actionName, [ActionResultObjectValue] object? value):
  - Không chỉ đặt header Location mà còn bao gồm biểu diễn serialized của đối tượng được cung cấp trong body phản hồi
  - Hữu ích để gửi thêm chi tiết về việc chấp nhận hoặc quy trình đang được khởi tạo
4. AcceptedAtActionResult AcceptedAtAction(string? actionName, string? controllerName, [ActionResultObjectValue] object? routeValues):
  - Cho phép chỉ định controller và action, sử dụng route values để tạo URL Location động
  - Hữu ích khi cần tham số URL để truy cập action
5. AcceptedAtActionResult AcceptedAtAction(string? actionName, object? routeValues, [ActionResultObjectValue] object? value):
  - Đặt header Location bằng cách sử dụng action và route values động, đồng thời bao gồm dữ liệu bổ sung trong body phản hồi
  - Kết hợp linh hoạt của việc truyền tham số route với khả năng trả về đối tượng dữ liệu
6. AcceptedAtActionResult AcceptedAtAction(string? actionName, string? controllerName, object? routeValues, [ActionResultObjectValue] object? value):
  - Phiên bản đầy đủ nhất, chỉ định controller, action, route values để tạo URL và một đối tượng cho body phản hồi
  - Cung cấp tính linh hoạt tối đa trong việc hướng dẫn client đến URL cụ thể đồng thời cung cấp ngữ cảnh hoặc chi tiết cần thiết về quy trình

-- Using AcceptedAtRoute in ASP.NET Core Web API --
- Trong ASP.NET Core Web API, phương thức AcceptedAtRoute được sử dụng để tạo một AcceptedAtRouteResult tương ứng với mã trạng thái HTTP 202 Accepted.
- Phương thức này giúp hướng dẫn client đến một route cụ thể để thực hiện các hành động tiếp theo hoặc kiểm tra trạng thái của một request đã được chấp nhận nhưng vẫn đang được xử lý. 
- Nó tương tự như AcceptedAtAction nhưng sử dụng tên route thay vì tên action để xây dựng URI trong header Location.
- Dưới đây là các phiên bản overload của phương thức AcceptedAtRoute trong ASP.NET Core Web API (các phương thức này nằm trong lớp ControllerBase):
1. AcceptedAtRouteResult AcceptedAtRoute([ActionResultObjectValue] object? routeValues):
  - Trả về mã trạng thái 202 Accepted và thiết lập header Location bằng cách sử dụng các route values ánh xạ tới một named route.
  - Hữu ích khi không cần chỉ định rõ tên route mà dựa vào cấu hình routing để khớp với các giá trị được cung cấp.
2. AcceptedAtRouteResult AcceptedAtRoute(string? routeName):
  - Trả về mã trạng thái 202 Accepted và xây dựng header Location bằng cách sử dụng named route được chỉ định mà không cần thêm route values.
  - Đơn giản khi route không yêu cầu thêm các tham số để resolve chính xác.
3. AcceptedAtRouteResult AcceptedAtRoute(string? routeName, object? routeValues):
  - Kết hợp một tên route cụ thể với các route values để tạo URL cho Location.
  - Đặc biệt hữu ích khi muốn hướng client tới một route phức tạp yêu cầu các tham số.
4. AcceptedAtRouteResult AcceptedAtRoute(object? routeValues, [ActionResultObjectValue] object? value):
  - Thiết lập header Location dựa trên route values và bao gồm cả response body chứa dữ liệu được serialize.
  - Hữu ích khi muốn cung cấp cho client thêm chi tiết về request đã được chấp nhận hoặc quá trình xử lý đang diễn ra.
5. AcceptedAtRouteResult AcceptedAtRoute(string? routeName, object? routeValues, [ActionResultObjectValue] object? value):
  - Phiên bản overload chi tiết nhất, cho phép chỉ định route bằng tên, bao gồm các tham số cần thiết cho route thông qua route values, và gửi thêm dữ liệu trong response body.
  - Cung cấp sự linh hoạt cao nhất, cho phép kiểm soát chính xác việc xây dựng URL và thông tin trả về cho client.

-- When should you use the 202 Accepted Status Code in ASP.NET Core Web API? --
- Mã trạng thái 202 Accepted trong ASP.NET Core Web API nên được sử dụng trong các trường hợp khi một yêu cầu đã được máy chủ tiếp nhận và hiểu, nhưng quá trình xử lý chưa hoàn thành ngay lập tức.
- Nó báo hiệu rằng yêu cầu đã được chấp nhận để xử lý, nhưng việc xử lý sẽ mất một khoảng thời gian và phản hồi cuối cùng chưa có sẵn ngay.
- Dưới đây là một số tình huống cụ thể khi bạn nên trả về mã 202 Accepted:
1. Các tiến trình chạy dài (Long-Running Processes):
- Khi một yêu cầu khởi động một tiến trình tốn nhiều thời gian (ví dụ: một tác vụ xử lý hàng loạt hoặc công việc nền), client không nên mong đợi phản hồi ngay lập tức.
- Mã 202 Accepted thông báo rằng yêu cầu đã được chấp nhận và sẽ được xử lý trong nền.
2. Xử lý bất đồng bộ (Asynchronous Processing):
- Khi máy chủ cần thực hiện một thao tác tốn thời gian và bạn muốn thông báo cho client rằng yêu cầu của họ đã được chấp nhận và sẽ được xử lý bất đồng bộ (ví dụ: gửi một công việc xử lý hàng loạt, tải lên tệp tin, hoặc xử lý dữ liệu nền).
3. Yêu cầu được đưa vào hàng đợi (Queued Requests):
- Khi máy chủ đưa yêu cầu vào hàng đợi để xử lý sau. Client sẽ nhận được thông báo rằng yêu cầu đã được xếp hàng và sẽ được xử lý khi đến lượt (ví dụ: hệ thống xử lý đơn hàng, nơi các đơn hàng được đưa vào hàng đợi để thực hiện).
4. Các thao tác hoãn lại (Deferred Operations):
- Khi việc xử lý thực sự sẽ diễn ra sau, và client cần kiểm tra lại sau để biết trạng thái hoặc kết quả (ví dụ: lập lịch tác vụ hoặc sự kiện sẽ được thực thi trong tương lai).
5. Xử lý từng phần (Partial Processing):
- Khi phần đầu của yêu cầu đã được xử lý, nhưng các bước tiếp theo cần thời gian để hoàn thành (ví dụ: bắt đầu một giao dịch nhiều bước hoặc quy trình công việc, trong đó bước đầu tiên được chấp nhận nhưng các bước sau sẽ được xử lý sau).

-- When Should We Use Accepted vs AcceptedAtAction vs AcceptedAtRoute? --
- Trong ASP.NET Core Web API, Accepted, AcceptedAtAction và AcceptedAtRoute đều được sử dụng để trả về mã trạng thái HTTP 202 Accepted, nhưng mỗi phương thức phù hợp với các trường hợp khác nhau. Dưới đây là hướng dẫn khi nào nên sử dụng từng phương thức:
1. Accepted:
- Khi nào dùng: Khi bạn muốn xác nhận yêu cầu nhưng không cần cung cấp thêm thông tin về vị trí kiểm tra trạng thái hoặc cách lấy tài nguyên. 
- Đây là cách đơn giản nhất để trả về phản hồi 202 Accepted.
- Trường hợp cụ thể: Khi một yêu cầu đã được chấp nhận xử lý nhưng chưa có kết quả ngay lập tức và bạn không cần cung cấp URL để kiểm tra trạng thái hoặc thực hiện hành động tiếp theo.
2. AcceptedAtAction:
- Khi nào dùng: Khi bạn muốn trả về mã 202 Accepted kèm theo tiêu đề Location trỏ đến một action method cụ thể để client có thể kiểm tra trạng thái hoặc lấy thêm thông tin.
- Trường hợp cụ thể: Khi yêu cầu khởi tạo một quy trình và bạn muốn cung cấp URL đến một action (trong cùng controller hoặc controller khác) nơi client có thể theo dõi tiến trình hoặc nhận kết quả sau này.
3. AcceptedAtRoute:
- Khi nào dùng: Khi bạn muốn trả về mã 202 Accepted kèm theo tiêu đề Location trỏ đến một route cụ thể đã được định nghĩa trong cấu hình routing.
- Trường hợp cụ thể: Khi bạn muốn cung cấp URL đến một route (có thể nằm ngoài controller hiện tại) mà client có thể truy vấn để kiểm tra trạng thái. Phù hợp khi ứng dụng sử dụng named routes hoặc routing phức tạp.