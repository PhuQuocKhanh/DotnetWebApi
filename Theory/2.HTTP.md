-- What is HTTP? --
- HTTP là viết tắt của Hypertext Transfer Protocol (Giao thức Truyền tải Siêu văn bản). 
- Đây là nền tảng của quá trình truyền dữ liệu trên World Wide Web, định nghĩa cách thức định dạng, truyền tải thông điệp cũng như cách máy chủ web và trình duyệt phản hồi các lệnh khác nhau.
- HTTP hoạt động theo mô hình giao thức yêu cầu-phản hồi (request-response) giữa máy khách (thường là trình duyệt web) và máy chủ.

Ví dụ: Khi nhập một URL như https://www.example.com vào trình duyệt và nhấn Enter, trình duyệt sẽ gửi một yêu cầu HTTP đến máy chủ lưu trữ website example.com. Sau đó, trình duyệt nhận được phản hồi HTTP từ máy chủ, bao gồm nội dung HTML của trang web.

-- Why do we need to know about HTTP? --
- Hiểu về HTTP là điều cần thiết vì nó là giao thức chính để duyệt web và truyền tải dữ liệu trên internet. Đối với lập trình web, nắm vững HTTP quan trọng vì nhiều lý do, chẳng hạn như:
  - Phát triển Web: Hiểu cách dữ liệu được trao đổi giúp bạn xây dựng ứng dụng web hiệu quả hơn.
  - Xử lý sự cố: Kiến thức về HTTP hỗ trợ chẩn đoán và khắc phục các vấn đề liên quan đến web.

-- How do the Browser and Server Communicate with each other? --
- Đầu tiên, chúng ta cần hiểu khái niệm client (máy khách) và server (máy chủ) thông qua một ví dụ. 
- Giả sử bạn mở trình duyệt web, nhập URL và nhấn phím Enter. Khi bạn nhấn Enter, một yêu cầu (Request) sẽ được gửi đến máy chủ (thường là máy chủ web nơi ứng dụng được lưu trữ).
- Dữ liệu bạn gửi từ trình duyệt web đến máy chủ được gọi là Request, và dữ liệu bạn nhận lại từ máy chủ được gọi là Response. 
- Đây chính là cách trình duyệt và máy chủ giao tiếp với nhau thông qua Request và Response. 
- Quá trình này chỉ có thể thực hiện được nhờ giao thức HTTP. Do đó, yêu cầu có thể được gọi là HTTP Request, và phản hồi được gọi là HTTP Response.
- Trình duyệt không phải là client duy nhất. Ví dụ:
  - Nếu bạn sử dụng ứng dụng di động, điện thoại của bạn chính là client.
  - Nếu bạn gọi API bằng các công cụ như Postman hoặc Fiddler, thì Postman và Fiddler cũng đóng vai trò là client.

-- HTTP Request Components: --
- HTTP (Hypertext Transfer Protocol) là giao thức được sử dụng để giao tiếp giữa máy khách (client - như trình duyệt web, thiết bị di động, Postman, Fiddler, v.v.) và máy chủ (server - như web server) qua internet. 
- Máy khách gửi một HTTP request để yêu cầu tài nguyên từ máy chủ, và máy chủ phản hồi bằng một HTTP response chứa tài nguyên được yêu cầu hoặc thông báo lỗi.
- Khi chúng ta gửi dữ liệu từ phía máy khách (trình duyệt, điện thoại, Postman, Fiddler, Swagger, v.v.) đến máy chủ (web server), nó được gọi là một Request. Một request bao gồm các thành phần sau:
  1. URL: Mỗi Request phải có một URL duy nhất.
  2. HTTP Verb (Method): Mỗi Request phải có một HTTP Verb (Phương thức HTTP). Ví dụ: GET, POST, PUT, PATCH, DELETE, v.v.
  3. HTTP Header(s): Mỗi Request có thể chứa một hoặc nhiều Header.
  4. Request Body: Mỗi request có thể có một body. Body chứa dữ liệu mà chúng ta muốn gửi đến máy chủ.
1. Request Line 
  - Dòng Request của một HTTP request chứa ba phần: GET https://example.com/index.htm HTTP/1.1
  - HTTP Method: Chỉ định hành động mà client muốn thực hiện. Các phương thức phổ biến bao gồm GET (lấy dữ liệu), POST (gửi dữ liệu để xử lý), PUT (cập nhật dữ liệu), DELETE (xóa dữ liệu), và các phương thức khác như PATCH, HEAD, và OPTIONS.
  - Request Target/URL: Chỉ định tài nguyên được yêu cầu. Nó có thể là một URL đầy đủ hoặc đường dẫn đến tài nguyên trên server mà client muốn tương tác, ví dụ: /index.html.
HTTP Version: Chỉ định phiên bản của giao thức HTTP (ví dụ: HTTP/1.1, HTTP/2).
2. Request Headers:
- Mỗi HTTP Request có thể chứa một hoặc nhiều Request Headers. Headers cung cấp thông tin bổ sung về request. Chúng là các cặp key-value phân cách bằng dấu hai chấm và được gửi từng dòng sau dòng request. Các headers phổ biến bao gồm:
  - Host: Chỉ định tên miền của server.
  - User-Agent: Xác định phần mềm client gửi request (ví dụ: trình duyệt hoặc ứng dụng).
  - Accept: Cho server biết loại nội dung mà client có thể xử lý.
  - Content-Type: Khi request có body (như POST, PUT, hoặc PATCH), header này chỉ định loại dữ liệu của body.
  - Authorization: Thông tin xác thực client.
  - Cookie: Chứa các cookie mà client có cho domain này. Được sử dụng để quản lý trạng thái.
  - Cache-Control: Các chỉ thị cho cơ chế cache trong cả request và response.
- Ví dụ:
  - Host: www.example.com
  - User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36
  - Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
3. Request Body (Tùy chọn):
  - Body của HTTP request là tùy chọn và chỉ được sử dụng với các phương thức như POST, PUT, hoặc PATCH, khi client gửi dữ liệu đến server. Body có thể chứa dữ liệu như biểu mẫu, tệp tải lên hoặc payload JSON. Ví dụ, trong một POST request, body có thể chứa dữ liệu JSON như sau:
    {
    "username": "exampleuser",
    "password": "examplepass"
    }
4. Query Parameters:
- Query parameters là một phần của URL và gửi dữ liệu bổ sung đến server. Chúng nằm sau dấu "?" trong URL và được phân cách bằng "&".
Ví dụ: /search?q=example&sort=asc
       q=example: Query parameter q có giá trị là example.
       sort=asc: Query parameter sort có giá trị là asc.

-- HTTP Response Components: --
- Một phản hồi HTTP là những gì máy chủ gửi trả lại cho máy khách sau khi xử lý yêu cầu HTTP. 
- Phản hồi bao gồm nhiều thành phần quan trọng để truyền tải trạng thái của yêu cầu và bất kỳ dữ liệu hoặc phản hồi nào mà máy chủ gửi lại.
1. Các thành phần chính của phản hồi HTTP
- Mã trạng thái HTTP: Bắt buộc phải có, biểu thị trạng thái của yêu cầu HTTP
  - 200: Thành công
  - 500: Lỗi máy chủ nội bộ
  - 404: Không tìm thấy tài nguyên
  - Và các mã khác
- Tiêu đề phản hồi: Có thể có một hoặc nhiều tiêu đề phản hồi
- Dữ liệu: Phản hồi có thể chứa dữ liệu trả về cho máy khách
2. Dòng phản hồi (Response Line)
- Chứa 3 phần chính: HTTP/1.1 200 OK
- Phiên bản HTTP: Xác định phiên bản giao thức HTTP mà máy chủ đang sử dụng (ví dụ: HTTP/1.1, HTTP/2)
- Mã trạng thái: Mã số 3 chữ số biểu thị kết quả của yêu cầu, được phân loại thành:
  - 2xx: Thành công
  - 4xx: Lỗi phía máy khách
  - 5xx: Lỗi phía máy chủ
- Văn bản trạng thái: Mô tả ngắn gọn, dễ hiểu về mã trạng thái (ví dụ: "OK", "Not Found")
3. Tiêu đề phản hồi (Response Headers)
- Mỗi phản hồi HTTP có thể có một hoặc nhiều tiêu đề, cung cấp thông tin bổ sung về phản hồi và về chính máy chủ. Chúng là các cặp khóa-giá trị phân cách bằng dấu hai chấm.
- Một số tiêu đề phổ biến:
  - Content-Type: Loại nội dung phản hồi (ví dụ: text/html, application/json)
  - Content-Length: Độ dài nội dung phản hồi (tính bằng byte)
  - Server: Thông tin về phần mềm máy chủ xử lý yêu cầu
  - Set-Cookie: Gửi cookie từ máy chủ tới trình duyệt máy khách
  - Cache-Control: Chỉ thị về cơ chế bộ nhớ đệm
  - Date: Thời gian gửi phản hồi
4. Thân phản hồi (Response Body)
- Phần thân phản hồi HTTP là tùy chọn, phụ thuộc vào phương thức và mã trạng thái. Thân phản hồi chứa dữ liệu được gửi từ máy chủ tới máy khách, có thể là HTML, JSON, XML, file hoặc bất kỳ loại nội dung nào khác.

-- HTTP Verbs or HTTP Methods: --
1. Phương thức GET
- Phương thức GET yêu cầu biểu diễn của tài nguyên được chỉ định.
- Nó chỉ được sử dụng để truy xuất dữ liệu (thao tác chỉ đọc) và không nên thay đổi tài nguyên hoặc trạng thái của nó bằng bất kỳ cách nào. 
- Yêu cầu GET lý tưởng để lấy thông tin như trang web, JSON, XML hoặc các loại tài nguyên khác.
  - Idempotent: Có (Nhiều yêu cầu GET giống hệt nhau sẽ có cùng hiệu ứng như một yêu cầu duy nhất)
  - An toàn: Có (Yêu cầu GET không sửa đổi tài nguyên)
  - Có Request Body: Không (Mặc dù đặc tả HTTP không cấm body trong yêu cầu GET, nhưng nó thường bị bỏ qua và không được sử dụng)
- Ví dụ: GET /articles HTTP/1.1
2. Phương thức POST
- Phương thức POST gửi dữ liệu đến máy chủ để tạo tài nguyên mới hoặc thực hiện các thao tác có thể dẫn đến thay đổi trên máy chủ.
- Nó thường được sử dụng để gửi biểu mẫu, tải lên tệp hoặc gửi dữ liệu JSON/XML có thể dẫn đến việc tạo tài nguyên mới hoặc kích hoạt quy trình phía máy chủ.
  - Idempotent: Không (Nhiều yêu cầu POST giống hệt nhau có thể dẫn đến nhiều tài nguyên được tạo hoặc nhiều thao tác được thực hiện)
  - An toàn: Không (Yêu cầu POST thường thay đổi trạng thái máy chủ bằng cách tạo hoặc cập nhật tài nguyên)
  - Có Request Body: Có (dữ liệu được gửi trong request body, ví dụ: JSON, XML, form data)
3. Phương thức PUT
- Phương thức PUT thay thế hoặc cập nhật toàn bộ tài nguyên với dữ liệu được cung cấp trong yêu cầu. 
- Nếu tài nguyên không tồn tại, một số triển khai có thể tạo nó, nhưng mục đích chính thường là cập nhật hoặc thay thế toàn bộ tài nguyên hiện có.
  - Idempotent: Có (Gửi cùng yêu cầu PUT nhiều lần sẽ có cùng hiệu ứng cuối cùng như gửi một lần)
  - An toàn: Không (Yêu cầu PUT thay đổi trạng thái máy chủ bằng cách cập nhật hoặc tạo tài nguyên)
  - Có Request Body: Có (Chứa biểu diễn đầy đủ của tài nguyên cần được cập nhật)
- Phương thức DELETE
- Phương thức DELETE xóa tài nguyên được chỉ định khỏi máy chủ. Phương thức này xóa một thực thể hiện có, chẳng hạn như sản phẩm, khỏi bảng sản phẩm trong cơ sở dữ liệu.
- Idempotent: Có. Nhiều yêu cầu DELETE giống nhau sẽ có cùng hiệu ứng như một yêu cầu duy nhất
- An toàn: Không. Nó thay đổi trạng thái máy chủ
- Có Request Body: Tùy chọn. Thường không được sử dụng vì tài nguyên cần xóa thường được chỉ định trong URL
- Chiến lược xóa:
- Trong ứng dụng hiện đại, chúng ta có thể triển khai chức năng xóa theo hai cách: Xóa mềm (Soft Delete) và Xóa cứng (Hard Delete).
  - Xóa mềm: Trong bảng của bạn, nếu bạn có cột như IsDeleted hoặc IsActive, bạn muốn cập nhật cột đó thành false khi thực hiện thao tác xóa. Trong trường hợp này, thay vì sử dụng DELETE, bạn cần sử dụng phương thức PATCH.
  - Xóa cứng: Nếu bạn muốn xóa thực thể hiện có khỏi bảng, thì sử dụng phương thức DELETE.
4. Phương thức HEAD
  - Phương thức HEAD gần giống với GET, ngoại trừ việc nó yêu cầu máy chủ chỉ trả về các tiêu đề phản hồi mà không có body phản hồi.
  - Idempotent: Có
  - An toàn: Có
  - Có Request và Response Body: Không
  - Ví dụ: HEAD /articles HTTP/1.1
5. Phương thức OPTIONS
- Phương thức OPTIONS truy xuất các tùy chọn giao tiếp có sẵn cho một tài nguyên. Nó thường được sử dụng để xác định các phương thức HTTP được hỗ trợ và các khả năng khác của máy chủ.
  - Idempotent: Có
  - An toàn: Có
  - Có Response Body: Tùy chọn
- Ví dụ: OPTIONS /articles HTTP/1.1

-- HTTP Status Code Categories-- 
- Mã trạng thái HTTP là thành phần quan trọng trong phản hồi HTTP mà máy chủ gửi đến máy khách. 
- Chúng là các số có 3 chữ số được máy chủ trả về để thông báo cho máy khách về kết quả của yêu cầu, cho dù yêu cầu thành công, gặp lỗi hay cần thao tác tiếp theo. 
- Mã trạng thái HTTP được chia thành 5 loại dựa trên chữ số đầu tiên.
- Hiểu rõ các loại mã này rất quan trọng cho việc gỡ lỗi, tối ưu ứng dụng web và đảm bảo giao tiếp hiệu quả giữa máy khách và máy chủ. 
- Mã trạng thái HTTP được chia thành 5 loại dựa trên chữ số đầu tiên như sau (XX đại diện cho số thực tế):
  - 1xx (Phản hồi Thông tin): Yêu cầu đang được xử lý
  - 2xx (Phản hồi Thành công): Yêu cầu đã được nhận, hiểu và chấp nhận thành công
  - 3xx (Phản hồi Chuyển hướng): Cần thao tác thêm để hoàn thành yêu cầu
  - 4xx (Phản hồi Lỗi Máy khách): Có vấn đề với yêu cầu từ phía máy khách
  - 5xx (Phản hồi Lỗi Máy chủ): Máy chủ gặp sự cố khi xử lý yêu cầu
1. 1XX: Mã trạng thái Phản hồi Thông tin
- Các mã trong phạm vi 1xx thông báo cho máy khách rằng máy chủ đã nhận được yêu cầu và đang xử lý. 
- Đây không phải là phản hồi cuối cùng và thường không yêu cầu hành động từ phía máy khách. 
- Các mã này chủ yếu dùng cho mục đích thông tin.
  - 100 Continue: Máy chủ đã nhận được tiêu đề yêu cầu và yêu cầu máy khách gửi nội dung yêu cầu. Dùng khi máy khách cần xác nhận trước khi gửi dữ liệu lớn.
  - 102 Processing: Máy chủ đã nhận và bắt đầu xử lý yêu cầu nhưng chưa hoàn thành. Thông báo cho máy khách biết yêu cầu tốn thời gian vẫn đang được xử lý.
        - Lưu ý: Các phản hồi thông tin hiếm khi gặp trong tương tác web hàng ngày và thường dùng trong các tình huống nâng cao như các tiến trình chạy dài.
2. 2XX: Mã trạng thái Phản hồi Thành công
- Các mã 2XX cho biết máy chủ đã nhận, hiểu và chấp nhận yêu cầu của máy khách thành công. Các mã này xác nhận hành động mong muốn đã hoàn tất.
  - 200 OK: Phản hồi tiêu chuẩn cho yêu cầu HTTP thành công. Tài nguyên yêu cầu thường được trả về trong phần thân phản hồi (vd: truy cập trang web hoặc lấy dữ liệu từ API).
  - 201 Created: Yêu cầu thành công và đã tạo ra tài nguyên mới. Thường dùng cho yêu cầu POST (vd: tạo tài khoản người dùng mới hoặc đăng bài viết mới).
  - 202 Accepted: Yêu cầu đã được chấp nhận xử lý nhưng chưa hoàn thành. Thường dùng cho tác vụ bất đồng bộ (vd: khởi chạy công việc nền).
  - 204 No Content: Máy chủ xử lý thành công nhưng không trả về nội dung. Thường dùng sau thao tác DELETE hoặc PUT khi không cần trả dữ liệu (vd: xóa tài nguyên hoặc cập nhật bản ghi mà không cần trả dữ liệu đã cập nhật).
3. 3XX: Mã trạng thái Phản hồi Chuyển hướng
- Các mã 3XX cho biết máy khách cần thực hiện thao tác thêm để hoàn thành yêu cầu. Dùng khi tài nguyên đã di chuyển hoặc cần bước bổ sung để truy cập tài nguyên mong muốn.
  - 301 Moved Permanently: Tài nguyên đã di chuyển vĩnh viễn đến URI mới trong tiêu đề Location. Dùng khi chuyển hướng từ domain cũ sang mới - các yêu cầu sau nên dùng URI mới.
  - 302 Found: Tài nguyên tạm thời nằm ở URI khác. Máy khách nên dùng URI mới cho yêu cầu này nhưng các yêu cầu sau vẫn dùng URI gốc. Dùng cho chuyển hướng tạm thời khi bảo trì.
  - 304 Not Modified: Tài nguyên không thay đổi từ lần yêu cầu trước. Máy khách có thể dùng bản đã cache. Dùng cho cơ chế caching để giảm băng thông.
4. 4XX: Mã trạng thái Phản hồi Lỗi Máy khách
- Các mã 4XX cho biết yêu cầu của máy khách không hợp lệ hoặc không thể xử lý. Các lỗi này thường do vấn đề từ phía máy khách như yêu cầu sai định dạng, thiếu tham số, truy cập trái phép hoặc yêu cầu tài nguyên không tồn tại.
  - 400 Bad Request: Máy chủ không thể xử lý yêu cầu do cú pháp sai hoặc dữ liệu không hợp lệ (vd: gửi JSON sai định dạng trong yêu cầu POST).
  - 401 Unauthorized: Yêu cầu xác thực nhưng thất bại hoặc chưa cung cấp (vd: truy cập tài nguyên được bảo vệ mà không có chứng thực hợp lệ).
  - 403 Forbidden: Máy chủ hiểu yêu cầu nhưng từ chối ủy quyền (vd: truy cập tài nguyên không đủ quyền).
  - 404 Not Found: Không tìm thấy tài nguyên yêu cầu (vd: truy cập trang web hoặc API endpoint không tồn tại).
  - 405 Method Not Allowed: Phương thức HTTP không được hỗ trợ cho tài nguyên yêu cầu (vd: gửi yêu cầu PUT đến endpoint chỉ hỗ trợ GET và POST).
5. 5XX: Mã trạng thái Phản hồi Lỗi Máy chủ
- Các mã 5XX cho biết máy chủ không thể hoàn thành yêu cầu hợp lệ do lỗi từ phía máy chủ. Các lỗi này nằm ngoài tầm kiểm soát của máy khách và cần khắc phục từ phía máy chủ.
  - 500 Internal Server Error: Lỗi chung khi máy chủ gặp tình trạng không mong đợi (vd: ngoại lệ không được xử lý trong mã máy chủ).
  - 502 Bad Gateway: Máy chủ đóng vai trò gateway/proxy nhận phản hồi không hợp lệ từ upstream server (vd: lỗi giao tiếp giữa các proxy server).
  - 503 Service Unavailable: Máy chủ tạm thời không thể xử lý yêu cầu do quá tải hoặc bảo trì (vd: bảo trì theo lịch hoặc tăng đột biến lưu lượng). Máy khách nên thử lại sau.
  - 504 Gateway Timeout: Máy chủ gateway/proxy không nhận được phản hồi kịp thời từ upstream server (vd: phản hồi chậm từ dịch vụ backend dẫn đến timeout). Máy khách có thể cần gửi lại yêu cầu sau.