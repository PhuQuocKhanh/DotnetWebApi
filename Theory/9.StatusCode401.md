-- What is 401 HTTP Status Code? --
- Mã trạng thái HTTP 401 có nghĩa là "Unauthorized" (Chưa được xác thực). 
- Máy chủ web trả về mã trạng thái này khi truy cập vào tài nguyên yêu cầu xác thực, nhưng phía client chưa cung cấp thông tin xác thực hoặc xác thực không thành công. 
- Điều này cho biết rằng client cần phải thực hiện xác thực để có thể nhận được phản hồi mong muốn từ máy chủ.

1. Các nguyên nhân phổ biến gây lỗi 401 Unauthorized:
  - Thiếu hoặc sai thông tin xác thực:
    - Client không gửi thông tin xác thực hoặc gửi sai (ví dụ: sai username/password).
  - Token hết hạn hoặc không hợp lệ:
    - Trong các hệ thống xác thực sử dụng token (như JWT), token có thể đã hết hạn hoặc không hợp lệ.
  - Sai cơ chế xác thực:
    - Máy chủ yêu cầu một loại cơ chế xác thực (Authentication Scheme) khác với loại mà client đã gửi.
2. Cách hoạt động:
  - Client gửi yêu cầu:
    - Một yêu cầu được gửi từ client tới máy chủ.
  - Máy chủ yêu cầu xác thực:
    - Nếu tài nguyên cần xác thực mà yêu cầu không kèm thông tin xác thực, máy chủ sẽ phản hồi bằng mã trạng thái 401.
  - Client gửi lại với thông tin xác thực:
    - Sau khi nhận được mã lỗi 401, client có thể gửi lại yêu cầu kèm theo thông tin xác thực phù hợp, ví dụ như: username/password, API key, hoặc Bearer token.
3. Cách xử lý lỗi 401 Unauthorized:
  - Kiểm tra thông tin xác thực:
    - Đảm bảo rằng các thông tin xác thực (username, password, token, API key, v.v.) được gửi kèm theo yêu cầu là chính xác và hợp lệ.
  - Kiểm tra thời hạn token:
    - Nếu sử dụng token (ví dụ: JWT), hãy kiểm tra xem token có hết hạn hay không, và làm mới token nếu cần.
  - Xác minh quyền truy cập:
    - Đảm bảo rằng người dùng đã xác thực có đủ quyền để truy cập tài nguyên yêu cầu.
  - Kiểm tra cơ chế xác thực:
    - Đảm bảo rằng client đang sử dụng đúng cơ chế xác thực mà server yêu cầu (ví dụ: Basic Auth, Bearer Token, OAuth2,...).

-- When Should We Use 401 HTTP Status Code in ASP.NET Core Web API? --
- Mã trạng thái HTTP 401 Unauthorized nên được sử dụng trong ASP.NET Core Web API trong các tình huống mà client (máy khách) bắt buộc phải xác thực (authenticate) để có thể truy cập vào tài nguyên được yêu cầu. Dưới đây là một số trường hợp cụ thể nên trả về mã 401:
  1. Thiếu thông tin xác thực (Missing Authentication Credentials):
    - Khi client gửi request mà không kèm theo thông tin xác thực (ví dụ: token hoặc header Authorization), server nên phản hồi với mã 401 để báo rằng yêu cầu phải được xác thực mới được phép truy cập.
  2. Thông tin xác thực không hợp lệ (Invalid Authentication Credentials):
    - Nếu client cung cấp thông tin xác thực nhưng sai (ví dụ: token bị sai hoặc không hợp lệ), server nên trả về mã 401 để thông báo rằng thông tin xác thực không hợp lệ.
  3. Token xác thực đã hết hạn (Expired Authentication Tokens):
    - Khi client sử dụng JWT hoặc các loại token khác đã hết hạn, server nên trả về mã 401 để yêu cầu client đăng nhập hoặc làm mới token.
  4. Truy cập vào các endpoint được bảo vệ nhưng không gửi kèm thông tin xác thực (Protected Endpoints Without Authorization):
   - Nếu client cố truy cập vào một endpoint yêu cầu xác thực nhưng không gửi kèm thông tin xác thực, server sẽ trả về 401 để từ chối truy cập và yêu cầu xác thực. 